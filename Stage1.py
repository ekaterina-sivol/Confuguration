# Импорт модуля для работы с операционной системой
import os

def get_prompt():
    #Формирует приглашение командной строки в формате username@hostname:~$
    # Получаем имя пользователя: пробуем переменные окружения USER (Unix) и USERNAME (Windows)
    # Если обе недоступны, используем 'user' по умолчанию
    username = os.getenv('USER') or os.getenv('USERNAME') or 'user'

    try:
        # Пытаемся получить имя хоста через системный вызов uname() (работает в Unix/Linux)
        hostname = os.uname().nodename
    except AttributeError:
        # Если uname() не поддерживается (Windows), используем переменную COMPUTERNAME
        hostname = os.getenv('COMPUTERNAME', 'localhost')

    # Возвращаем отформатированное приглашение в стандартном формате
    return f"{username}@{hostname}:~$ "

def show_help():
    #Выводит справку по доступным командам
    print("\nДОСТУПНЫЕ КОМАНДЫ:")
    # Команда ls
    print("  ls [аргументы]    - показать содержимое директории (заглушка)")
    # Команда cd
    print("  cd [путь]         - сменить директорию (заглушка)")
    # Команда help для вызова справки
    print("  help              - показать эту справку")
    # Команда exit для выхода из программы
    print("  exit              - выйти из эмулятора")

def run_repl():
    #Основной цикл REPL (Read-Eval-Print-Loop) эмулятора
    print("\nЭМУЛЯТОР КОМАНДНОЙ СТРОКИ UNIX")
    print("Введите 'help' для списка команд, 'exit' для выхода")

    # Бесконечный цикл для постоянного чтения команд
    while True:
        # Получаем ввод пользователя с приглашением и удаляем лишние пробелы
        user_input = input(get_prompt()).strip()

        # Пропускаем пустой ввод (пользователь просто нажал Enter)
        if not user_input:
            continue

        # Разбиваем введенную строку на части по пробелам
        parts = user_input.split()
        # Первое слово - это команда
        command = parts[0]
        # Все остальные слова - аргументы команды
        args = parts[1:]

        # Обработка команды exit - выход из программы
        if command == "exit":
            print("Выход из эмулятора.")
            break  # Прерываем цикл while True
        # Обработка команды ls - вывод информации о команде и аргументах
        elif command == "ls":
            print(f"Команда: ls, Аргументы: {args}")
        # Обработка команды cd - вывод информации о команде и аргументах
        elif command == "cd":
            print(f"Команда: cd, Аргументы: {args}")
        # Обработка команды help - вызов функции показа справки
        elif command == "help":
            show_help()
        # Обработка неизвестных команд
        else:
            print(f"Ошибка: неизвестная команда '{command}'")
            # Подсказка пользователю
            print("Введите 'help' для списка доступных команд")

def main():
    #Главная функция программы
    # Сразу запускаем интерактивный режим командной строки
    run_repl()

# Стандартная проверка для запуска программы напрямую
if __name__ == "__main__":
    main()